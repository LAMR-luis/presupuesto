<!DOCTYPE html>
<html>
<head>
  <title>Balance General</title>
  <link rel="stylesheet" type="text/css" href="css/estilo2.css">
</head>
<body>

<h2 class="centered-text" >Balance General</h2>

<table id="data-table" border="0">
  <thead>
    <tr>
      <th></th>
      <th>3</th>
      <th>4</th>
      <th></th>
      <th>3</th>
      <th>4</th>
    </tr>
  </thead>
  <tbody>
    <!-- Celdas editables para los datos -->
    <tr>
      <td contenteditable="false" class="centered-text">Activo</td>
      <td contenteditable="false"></td>
      <td contenteditable="false"></td>
      <td contenteditable="false" class="centered-text">Pasivo</td>
      <td contenteditable="false"></td>
      <td contenteditable="false"></td>
    </tr>


    <!--Filas de datos  primera parte-->
    
    <tr>
        <td contenteditable="false" class="centered-text">Circulante</td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false" class="centered-text">Circulante</td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Efectivo</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="true"></td>
        <td contenteditable="false">Proveedores</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Bancos</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false">Documentos a pagar</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Inversiones temporales</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false">Acreedores diversos</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Mercancias</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false">Anticipo de clientes</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Clientes</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false">Impuestos por pagar</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Deudores diversos</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false" ></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false" ></td>
    </tr>
    <tr>
      <td contenteditable="false"></td>
      <td contenteditable="false" ></td>
      <td contenteditable="true" data-placeholder="$ -"><span id="suma-circulante1">$ -</span></td>
      <td contenteditable="false"></td>
      <td contenteditable="false"></td>
      <td contenteditable="true" data-placeholder="$ -"><span id="suma-circulante2">$ -</span></td>
    </tr>
    
    <!--Filas de datos  primera parte-->

    <!--Titulo-->
    <tr>
        <td contenteditable="false" class="centered-text">Fijo</td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false" class="centered-text">Fijo</td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
    </tr>

    <!--Filas de datos segunda parte-->
    
    <tr>
        <td contenteditable="false">Terrenos</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false">Hipotecas por pagar</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Edificios</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false">Creditos diferidos</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Moviliario y equipo</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false">Ventas cob. por ant.</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Cargos diferidos</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="true"></td>
    </tr>
    <tr>
        <td contenteditable="false">Gastos de organización</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false" ></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Papelería y útiles</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Publicidad</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
        <td contenteditable="false">Primas de seguros</td>
        <td contenteditable="true" data-placeholder="$ -" onkeypress="return soloNumeros(event)"></td>
        <td contenteditable="false" ></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
    </tr>
    <tr>
      <td contenteditable="false">Total Activo</td>
      <td contenteditable="false"></td>
      <td contenteditable="true" data-placeholder="$ -"><span id="suma-fijo1">$ -</span></td>
      <td contenteditable="false">Total Pasivo</td>
        <td contenteditable="false"></td>
        <td contenteditable="true" data-placeholder="$ -"><span id="suma-fijo2">$ -</span></td>
    </tr>
    <tr>
      <td contenteditable="false"></td>
      <td contenteditable="false"></td>
      <td contenteditable="false"></td>
      <td contenteditable="false">Capital Contable</td>
      <td contenteditable="false"></td>
      <td contenteditable="true" data-placeholder="$ -"><span id="suma-capital">$ -</span></td>
    </tr>
    
    <!--Filas de datos segunda parte-->

    <!--Titulo-->
    <tr>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false"></td>
        <td contenteditable="false">Total Pasivo más Capital</td>
        <td contenteditable="false"></td>
        <td contenteditable="true" data-placeholder="$ -"><span id="suma-pasivo-capital">$ -</span></td>
    </tr>

    <!-- Agrega más filas con celdas editables aquí -->
  </tbody>
</table>

<a href="#" id="mi-boton" class="back-button" onclick="window.history.back()">Regresar</a>


<script>

  // Función para agregar el evento de escucha a las celdas de cantidad y valor unitario
  function agregarEventosDeEscucha() {
      const cells = document.querySelectorAll('td[contenteditable="true"]');

      cells.forEach(cell => {
        cell.addEventListener('input', function() {
          calcularOperaciones()
        });
      });
    }

  // Llamar a la función para agregar los eventos de escucha al cargar la página
  document.addEventListener('DOMContentLoaded', agregarEventosDeEscucha);

  //funcion para el placeholder de dinero en celdas
  document.addEventListener('DOMContentLoaded', function() {
    const cells = document.querySelectorAll('td[contenteditable="true"]');

    cells.forEach(cell => {
      cell.addEventListener('click', function() {
        if (this.textContent === this.getAttribute('data-placeholder')) {
          this.textContent = '';
        }
      });

      cell.addEventListener('blur', function() {
        if (this.textContent.trim() === '') {
          this.textContent = this.getAttribute('data-placeholder');
          this.textContent = '';
        }
      });
    });
  });
  //aqui termina la funcion del place holder de celdas

  //Funcion para que se agregen solo numeros a las celdas
  function soloNumeros(event) {
  const charCode = event.which ? event.which : event.keyCode;
  const inputChar = String.fromCharCode(charCode);
  // Permite solo números y el backspace (código 8)
  if (!/^\d+$/.test(inputChar) && charCode !== 8) {
    event.preventDefault();
    return false;
  }
  return true;
  }
  //aqui termina la funcion para que se agregen solo numeros a las celdas


  // Función para calcular todo el balance general del proyecto
  function calcularOperaciones() {

    var table = document.getElementById("data-table").getElementsByTagName('tbody')[0];
    var circulante1 = 0;
    var circulante2 = 0;
    var fijo1 = 0;
    var fijo2 = 0;
    
      //codigo columna 1
    for (var i = 0; i < table.rows.length; i++) {
      var nombre = table.rows[i].cells[0].textContent;
      var puntuacion = parseInt(table.rows[i].cells[1].textContent); // Convertir a número entero
      // Sumar las puntuaciones de circulante1
      if (nombre === "Efectivo" || nombre === "Bancos" || nombre === "Inversiones temporales" || nombre === "Mercancias" || nombre === "Clientes" || nombre === "Deudores diversos") {
        if (!isNaN(puntuacion)) {
          circulante1 += puntuacion;
        }
      }
      
      // Sumar las puntuaciones de fijo1
      if (nombre === "Terrenos" || nombre === "Edificios" || nombre === "Moviliario y equipo" || nombre === "Cargos diferidos" || nombre === "Gastos de organización" || nombre === "Papelería y útiles" || nombre === "Publicidad" || nombre === "Primas de seguros") {
        if (!isNaN(puntuacion)) {
          fijo1 += puntuacion;
        }
      }
    }

    
    //codigo columna 2
    for (var i = 0; i < table.rows.length; i++) {
      var nombre = table.rows[i].cells[3].textContent;
      var puntuacion = parseInt(table.rows[i].cells[4].textContent); // Convertir a número entero
      // Sumar las puntuaciones de circulante2
      if (nombre === "Proveedores" || nombre === "Documentos a pagar" || nombre === "Acreedores diversos" || nombre === "Anticipo de clientes" || nombre === "Impuestos por pagar" ) {
        if (!isNaN(puntuacion)) {
          circulante2 += puntuacion;
        }
      }
      // Sumar las puntuaciones de fijo2
      if (nombre === "Hipotecas por pagar" || nombre === "Creditos diferidos" || nombre === "Ventas cob. por ant." ) {
        if (!isNaN(puntuacion)) {
          fijo2 += puntuacion;
        }
      } 
    }
    

    // Mostrar los resultados de la suma
    const circu1 = document.getElementById("suma-circulante1");
    circu1.textContent = `$ ${circulante1.toFixed(2)}`;

    //document.getElementById("suma-fijo1").innerHTML = fijo1;
    let sumaActiva = circulante1 + fijo1;
    const sActiva = document.getElementById("suma-fijo1");
    sActiva.textContent = `$ ${sumaActiva.toFixed(2)}`;



    const circu2 = document.getElementById("suma-circulante2");
    circu2.textContent = `$ ${circulante2.toFixed(2)}`;

    //document.getElementById("suma-fijo2").innerHTML = fijo2;
    let sumaPasiva = circulante2 + fijo2;
    const sPasiva = document.getElementById("suma-fijo2");
    sPasiva.textContent = `$ ${sumaPasiva.toFixed(2)}`;
    
    
    // creacaion de las operaciones para mostrar el resulado de los datos
    const totalCapital = sumaActiva - sumaPasiva;
    const pasivoCapital = sumaPasiva + totalCapital;

    // funcion para las ultimas funciones de balance
    const capitalSpan = document.getElementById('suma-capital');
    capitalSpan.textContent = `$ ${totalCapital.toFixed(2)}`;

    const pasivoCapitalSpan = document.getElementById('suma-pasivo-capital');
    pasivoCapitalSpan.textContent = `$ ${pasivoCapital.toFixed(2)}`;


  }
  // aqui termina la funcion para calcular todas las operacion del balance general

  
</script>

</body>
</html>
